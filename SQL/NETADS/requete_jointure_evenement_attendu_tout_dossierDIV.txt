
select DOSS_EVENTLINK.ID_DOSSIER, 
/*Tiers*/
DOSS_TIERS.CATEGORIE,
DOSS_TIERS.NOM_DENOMINATION,
/*Centroide*/
DOSS_PARC.ID_PARCELLE,
/*Date de dépot*/
DOSSIER.DEPOT_DATE,
/*Nom de l'evenement*/
EVENEMENT.NOM_COMPLET,
/*services*/
(Select NETDATA.VARDESC1 
from NETDATA
Where NETDATA.VARTYPE='SERVICE' AND NETDATA.VARID= DOSS_EVENT.ID_SERVICE
) AS SERVICE,
/* Delais*/
DOSS_EVENTLINK.DATE_LIMITE,
DOSS_EVENTLINK.DELAI_VALEUR,
DOSS_EVENTLINK.DELAI_TYPE
 
/*code INSTRUCTEUR*/
DOSSIER.CODE_INSTRUCTEUR,
(Select NETDATA.VARDESC1 
from NETDATA
Where NETDATA.VARTYPE='TIERS' AND VARCODE1='INS' AND NETDATA.VARID= DOSSIER.CODE_INSTRUCTEUR
) AS INSTRUCTEUR
 
 
FROM DOSS_EVENTLINK
 
/*jointure tiers princial value= 1*/
Left Join DOSS_TIERS
ON DOSS_TIERS.ID_DOSS_TIERS=1
AND DOSS_TIERS.ID_MODULE=DOSS_EVENTLINK.ID_MODULE
AND DOSS_TIERS.ID_DOSSIER=DOSS_EVENTLINK.ID_DOSSIER
 
 
/*jointure parcelle */
Left Join DOSS_PARC
ON DOSS_PARC.ID_MODULE=DOSS_EVENTLINK.ID_MODULE
AND DOSS_PARC.ID_DOSSIER=DOSS_EVENTLINK.ID_DOSSIER
 
/*jointure date de dépots*/
Left Join DOSSIER
ON DOSSIER.ID_MODULE=DOSS_EVENTLINK.ID_MODULE
AND DOSSIER.ID_DOSSIER=DOSS_EVENTLINK.ID_DOSSIER
 
 
 
/*jointure pour l'ID des services */
LEFT JOIN DOSS_EVENT
ON DOSS_EVENT.ID_MODULE=DOSS_EVENTLINK.ID_MODULE
AND
DOSS_EVENT.ID_DOSSIER=DOSS_EVENTLINK.ID_DOSSIER
AND
DOSS_EVENT.ID_DOSS_EVENT=DOSS_EVENTLINK.ID_DOSS_EVENT
 
/*jointure des évènements*/
LEFT JOIN EVENEMENT
ON EVENEMENT.ID_MODULE=DOSS_EVENTLINK.ID_MODULE 
AND EVENEMENT.ID_MODELE=0 
AND (
/*evenement modèle*/
(EVENEMENT.ID_EVENT=DOSS_EVENTLINK.ID_EVENTLIBRELINK)
OR
/*evenement libre*/
((DOSS_EVENTLINK.ID_EVENTLIBRELINK=0) AND (EVENEMENT.ID_EVENT=DOSS_EVENTLINK.ID_EVENTLINK))
)
where DOSS_EVENTLINK.ID_MODULE = 'DIV'